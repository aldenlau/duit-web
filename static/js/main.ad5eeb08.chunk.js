(this.webpackJsonpduit=this.webpackJsonpduit||[]).push([[0],{46:function(t,e,n){},47:function(t,e,n){},97:function(t,e,n){"use strict";n.r(e);var a=n(4),r=n.n(a),c=n(16),s=n.n(c),i=(n(46),n(5)),o=(n.p,n(47),n(3));var u=function(t){var e=t.timeToComplete,n=(t.dueDate,t.title),a=(t.desc,t.priority,t.onClick);return t.taskId,Object(o.jsx)("div",{onClick:a,children:Object(o.jsx)("table",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:n}),Object(o.jsxs)("td",{children:[e," min"]})]})})})},j=n(10);function d(t){var e,n=new Map,a=Object(j.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value,c={time:r.time,remainingTime:r.remaining_time,title:r.title,desc:r.description,priority:r.priority,startDate:r.start_date,dueDate:r.due_date,taskId:r.task_id};n.has(r.due_date)?n.get(r.due_date).push(c):n.set(r.due_date,[c])}}catch(s){a.e(s)}finally{a.f()}return n}var b=function(t){var e=t.date,n=t.tasks,a=(t.completedState,t.setTasksState),r=(t.setCompletedState,t.token);return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{children:e}),n.map((function(t){return Object(o.jsx)(u,{timeToComplete:t.time,dueDate:e,title:t.title,desc:t.desc,priority:t.priority,onClick:function(){fetch("https://duit-api.herokuapp.com/update/deltask?token=".concat(r),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({taskId:t.taskId})}).then((function(t){return t.json()})).then((function(t){return a(d(t))}))},taskId:t.taskId},t.taskId)}))]})},h=n(35),l=n.n(h);n(49);function p(t){return t.getFullYear()+"/"+(t.getMonth()>8?""+(t.getMonth()+1):"0"+(t.getMonth()+1))+"/"+(t.getDate()>9?""+t.getDate():"0"+t.getDate())}var O=function(t){var e=t.roundTime,n=t.setTasksState,r=t.token,c=Object(a.useState)(new Date),s=Object(i.a)(c,2),u=s[0],j=s[1],b=Object(a.useState)(new Date),h=Object(i.a)(b,2),O=h[0],f=h[1],g=Object(a.useState)(""),v=Object(i.a)(g,2),k=v[0],m=v[1],x=Object(a.useState)(0),S=Object(i.a)(x,2),y=S[0],C=S[1],D=Object(a.useState)(""),T=Object(i.a)(D,2),w=T[0],M=T[1],I=Object(a.useState)(0),L=Object(i.a)(I,2),P=L[0],_=L[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{children:"Add new task"}),Object(o.jsx)("input",{onChange:function(t){return m(t.target.value)}}),Object(o.jsx)("input",{onChange:function(t){return M(t.target.value)}}),Object(o.jsx)("input",{type:"number",onChange:function(t){return C(parseInt(t.target.value))}}),Object(o.jsx)("input",{type:"number",onChange:function(t){return _(parseInt(t.target.value))}}),Object(o.jsx)(l.a,{selected:u,onChange:function(t){return j(t)}}),Object(o.jsx)(l.a,{selected:O,onChange:function(t){return f(t)}}),Object(o.jsx)("button",{type:"button",onClick:function(){var t=Date.now(),a=p(u),c=p(O);fetch("https://duit-api.herokuapp.com/update/addtask?token=".concat(r),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({time:Math.ceil(y/e)*e,remainingTime:Math.ceil(y/e)*e,title:k,desc:w,priority:P,startDate:a,dueDate:c,taskId:t})}).then((function(t){return t.json()})).then((function(t){return n(d(t))}))},children:"Add Task"})]})},f=n(39),g=n(36);function v(t){return new Date(t.substring(5,7)+"/"+t.substring(8,10)+"/"+t.substring(0,4))}function k(t,e){var n=v(t),a=v(e);return Math.ceil(Math.abs(a-n)/864e5)}function m(t,e){if(t.size>0){var n,a,r,c=new Map,s=[],o=new Map,u=new Map,d=Object(j.a)(t);try{for(d.s();!(r=d.n()).done;){var b,h=Object(i.a)(r.value,2),l=(h[0],h[1]),O=Object(j.a)(l);try{for(O.s();!(b=O.n()).done;){var m=b.value,x=k(m.startDate,m.dueDate)+1;u.set(m.taskId,x),(void 0==n||n>m.startDate)&&(n=m.startDate),(void 0==a||a<m.dueDate)&&(a=m.dueDate);for(var S=0;S<x;S++){var y=v(m.startDate);y.setDate(y.getDate()+S),y=p(y),o.has(y)?o.set(y,o.get(y)+Math.round(m.time/e)):o.set(y,Math.round(m.time/e))}for(var C=0;C<Math.round(m.time/e);C++){var D=Object(g.a)({},m);D.time=e,delete D.onClick,s.push(D)}}}catch(U){O.e(U)}finally{O.f()}}}catch(U){d.e(U)}finally{d.f()}for(var T=k(n,a)+1,w=0;w<T;w++){var M=v(n);M.setDate(M.getDate()+w),M=p(M),c.set(M,[])}s.sort((function(t,e){return u.get(t.taskId)>u.get(e.taskId)?1:-1})),o=new Map(Object(f.a)(o.entries()).sort((function(t,e){return t[1]>e[1]?1:-1})));for(var I=0;s.length>0;){var L=v(n);if(L.setDate(L.getDate()+I),L=p(L),o.has(L)&&o.get(L)>0){for(var P=0;P<s.length;P++)if(s[P].startDate<=L&&L<=s[P].dueDate){c.get(L).push(s[P]),s.splice(P,1);break}o.set(L,o.get(L)-1)}I=(I+1)%T}var _,A=new Map,F=Object(j.a)(c);try{for(F.s();!(_=F.n()).done;){var J=Object(i.a)(_.value,2),N=J[0],E=J[1];E.length>0&&A.set(N,E)}}catch(U){F.e(U)}finally{F.f()}return function(t){var e,n=new Map,a=Object(j.a)(t);try{for(a.s();!(e=a.n()).done;){var r=Object(i.a)(e.value,2),c=r[0],s=r[1];if(s.length>0){var o,u=new Map,d=Object(j.a)(s);try{for(d.s();!(o=d.n()).done;){var b=o.value;u.has(b.taskId)?u.set(b.taskId,[b,u.get(b.taskId)[1]+b.time]):u.set(b.taskId,[b,b.time])}}catch(U){d.e(U)}finally{d.f()}var h,l=[],p=Object(j.a)(u);try{for(p.s();!(h=p.n()).done;){var O=Object(i.a)(h.value,2),f=(O[0],O[1]),v=Object(g.a)({},f[0]);v.time=f[1],l.push(v)}}catch(U){p.e(U)}finally{p.f()}n.set(c,l)}}}catch(U){a.e(U)}finally{a.f()}return n}(A)}return new Map}var x=function(t){var e=t.tasks,n=t.roundTime,r=Object(a.useState)(new Map),c=Object(i.a)(r,2),s=c[0],u=c[1],j=[];return s.forEach((function(t,e){return j.push(Object(o.jsx)(b,{date:e,tasks:t},"s"+e))})),Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{onClick:function(){return u(m(e,n))},children:"Generate new schedule"}),j]})};var S=function(t){var e=t.setLogin,n=Object(a.useState)(""),r=Object(i.a)(n,2),c=r[0],s=r[1],u=Object(a.useState)(""),j=Object(i.a)(u,2),d=j[0],b=j[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{type:"button",onClick:function(){return e()},children:"Log in with an existing account"}),Object(o.jsx)("p",{children:"Register"}),Object(o.jsx)("p",{children:"Username"}),Object(o.jsx)("input",{onChange:function(t){return s(t.target.value)}}),Object(o.jsx)("p",{children:"Password"}),Object(o.jsx)("input",{onChange:function(t){return b(t.target.value)}}),Object(o.jsx)("button",{type:"button",onClick:function(){fetch("https://duit-api.herokuapp.com/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:c,password:d})}).then((function(t){return console.log(t.status)}))},children:"Register"})]})};var y=function(t){var e=t.setLogin,n=t.setToken,r=t.setTaskState,c=Object(a.useState)(""),s=Object(i.a)(c,2),u=s[0],j=s[1],b=Object(a.useState)(""),h=Object(i.a)(b,2),l=h[0],p=h[1],O="";return Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{type:"button",onClick:function(){return e()},children:"Create an account"}),Object(o.jsx)("p",{children:"Login"}),Object(o.jsx)("p",{children:"Username"}),Object(o.jsx)("input",{onChange:function(t){return j(t.target.value)}}),Object(o.jsx)("p",{children:"Password"}),Object(o.jsx)("input",{onChange:function(t){return p(t.target.value)}}),Object(o.jsx)("button",{type:"button",onClick:function(){fetch("https://duit-api.herokuapp.com/login?username=".concat(u,"&password=").concat(l)).then((function(t){return 401!=t.status?t.json():(alert("Incorrect credentials"),{token:""})})).then((function(t){n(t.token),O=t.token})).then((function(t){return fetch("https://duit-api.herokuapp.com/update/tasks?token=".concat(O))})).then((function(t){return t.json()})).then((function(t){return r(d(t))}))},children:"Log in"})]})};var C=function(t){var e=t.setTokenState,n=t.setTasksState,r=Object(a.useState)(!0),c=Object(i.a)(r,2),s=c[0],u=c[1];return Object(o.jsx)("div",{children:s?Object(o.jsx)(y,{setLogin:function(){return u(!1)},setToken:e,setTaskState:n}):Object(o.jsx)(S,{setLogin:function(){return u(!0)}})})};var D=function(){var t=Object(a.useState)(new Map),e=Object(i.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)(30),s=Object(i.a)(c,2),u=s[0],j=(s[1],Object(a.useState)(new Map)),d=Object(i.a)(j,2),h=d[0],l=d[1],p=Object(a.useState)([]),f=Object(i.a)(p,2),g=(f[0],f[1],Object(a.useState)("")),v=Object(i.a)(g,2),k=v[0],m=v[1],S=[];return n.forEach((function(t,e){return S.push(Object(o.jsx)(b,{date:e,tasks:t,completedState:h,setTasksState:r,setCompletedState:l,token:k},e))})),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(C,{setTokenState:m,setTasksState:r}),Object(o.jsx)(O,{roundTime:u,setTasksState:r,token:k}),S,Object(o.jsx)(x,{tasks:n,roundTime:u})]})},T=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,104)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),a(t),r(t),c(t),s(t)}))};s.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(D,{})}),document.getElementById("root")),T()}},[[97,1,2]]]);
//# sourceMappingURL=main.ad5eeb08.chunk.js.map