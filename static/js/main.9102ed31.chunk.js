(this.webpackJsonpduit=this.webpackJsonpduit||[]).push([[0],{109:function(t,e,n){"use strict";n.r(e);var a=n(2),s=n.n(a),c=n(18),r=n.n(c),i=(n(54),n(7)),o=n(5),u=(n(55),n(27)),d=n(12);function j(t){var e,n=new Map,a=Object(d.a)(t);try{for(a.s();!(e=a.n()).done;){var s=e.value,c={time:s.time,remainingTime:s.remaining_time,title:s.title,desc:s.description,priority:s.priority,startDate:s.start_date,dueDate:s.due_date,taskId:s.task_id};n.has(s.due_date)?n.get(s.due_date).push(c):n.set(s.due_date,[c])}}catch(r){a.e(r)}finally{a.f()}return n=new Map(Object(u.a)(n.entries()).sort())}var l,p,b,h,f,O=n(6),m={main:"#00a2ff",second:"#69c8ff",fontFamily:"Merriweather"},g=O.c.button(l||(l=Object(i.a)(["\n    background-color: ",";\n    color: #fff;\n    border: 1px solid transparent;\n    margin-right: 5px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n    height: 35px;\n    font-weight: bold;\n    font-size: 12px;\n    padding: 6px 12px 7px 12px;\n    border-radius: 5px;\n    text-align: center;\n    cursor: pointer;\n    font-family: ",";\n"])),(function(t){return t.theme.main}),(function(t){return t.theme.fontFamily})),k=O.c.button(p||(p=Object(i.a)(["\n    background-color: ",";\n    color: #fff;\n    border: 1px solid transparent;\n    margin-right: 5px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n    height: 28px;\n    font-weight: bold;\n    font-size: 12px;\n    padding: 6px 12px 7px 12px;\n    border-radius: 5px;\n    text-align: center;\n    cursor: pointer;\n    font-family: ",";\n"])),(function(t){return t.theme.second}),(function(t){return t.theme.fontFamily})),x=O.c.input(b||(b=Object(i.a)(["\n    border: hidden;\n    background-color: #f2f2f2;\n    border-radius: 5px;\n    height: 25px;\n"]))),v=Object(O.b)(h||(h=Object(i.a)(["\n    body {\n        font-family: ",";\n    }\n"])),(function(t){return t.theme.fontFamily})),T=n(3);var y,S=Object(O.c)((function(t){var e=t.className,n=t.setLogin,s=t.setToken,c=t.setTaskState,r=Object(a.useState)(""),i=Object(o.a)(r,2),u=i[0],d=i[1],l=Object(a.useState)(""),p=Object(o.a)(l,2),b=p[0],h=p[1];return Object(T.jsxs)("div",{className:e,children:[Object(T.jsx)(k,{type:"button",onClick:function(){return n()},children:"Log in with an existing account"}),Object(T.jsx)("p",{children:"Register"}),Object(T.jsx)("p",{children:"Username"}),Object(T.jsx)(x,{onChange:function(t){return d(t.target.value)}}),Object(T.jsx)("p",{children:"Password"}),Object(T.jsx)(x,{onChange:function(t){return h(t.target.value)}}),Object(T.jsx)(g,{type:"button",onClick:function(){fetch("https://duit-api.herokuapp.com/auth/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:u,password:b})}).then((function(t){return t.json()})).then((function(t){return s(t.token),t.token})).then((function(t){return fetch("https://duit-api.herokuapp.com/update/tasks?token=".concat(t))})).then((function(t){return t.json()})).then((function(t){return c(j(t))}))},children:"Register"})]})}))(f||(f=Object(i.a)(["\n    display: flex;\n    flex-direction: column;\n    padding: 6px 12px 7px 12px;\n    align-items:center;\n"])));var w,C=Object(O.c)((function(t){var e=t.className,n=t.setLogin,s=t.setToken,c=t.setTaskState,r=Object(a.useState)(""),i=Object(o.a)(r,2),u=i[0],d=i[1],l=Object(a.useState)(""),p=Object(o.a)(l,2),b=p[0],h=p[1];return Object(T.jsxs)("div",{className:e,children:[Object(T.jsx)(k,{onClick:function(){return n()},children:"Create an account"}),Object(T.jsx)("p",{children:"Login"}),Object(T.jsx)("p",{children:"Username"}),Object(T.jsx)(x,{onChange:function(t){return d(t.target.value)}}),Object(T.jsx)("p",{children:"Password"}),Object(T.jsx)(x,{onChange:function(t){return h(t.target.value)}}),Object(T.jsx)(g,{type:"button",onClick:function(){fetch("https://duit-api.herokuapp.com/auth/login?username=".concat(u,"&password=").concat(b)).then((function(t){return 401!=t.status?t.json():(alert("Incorrect credentials"),{token:""})})).then((function(t){return s(t.token),t.token})).then((function(t){return fetch("https://duit-api.herokuapp.com/update/tasks?token=".concat(t))})).then((function(t){return t.json()})).then((function(t){return c(j(t))}))},children:"Log in"})]})}))(y||(y=Object(i.a)(["\n    display: flex;\n    flex-direction: column;\n    padding: 6px 12px 7px 12px;\n    align-items:center;\n"])));var D,M=Object(O.c)((function(t){var e=t.setToken,n=t.setTaskState;function s(t){var a=t.getAuthResponse().id_token;fetch("https://duit-api.herokuapp.com/auth/login-google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a})}).then((function(t){return t.json()})).then((function(t){return e(t.token),t.token})).then((function(t){return fetch("https://duit-api.herokuapp.com/update/tasks?token=".concat(t))})).then((function(t){return t.json()})).then((function(t){return n(j(t))}))}return Object(a.useEffect)((function(){window.gapi.signin2.render("g-signin2",{scope:"https://www.googleapis.com/auth/plus.login",width:120,height:36,longtitle:!1,theme:"light",onsuccess:s})})),Object(T.jsx)("div",{children:Object(T.jsx)("div",{id:"g-signin2","data-onsuccess":s})})}))(w||(w=Object(i.a)(["\n"]))),I=n.p+"static/media/logo.994c7676.png";var N=Object(O.c)((function(t){var e=t.className,n=t.setTokenState,s=t.setTasksState,c=Object(a.useState)(!0),r=Object(o.a)(c,2),i=r[0],u=r[1];return Object(T.jsxs)("div",{className:e,children:[Object(T.jsx)("img",{src:I,width:"20%",height:"20%",style:{margin:"10px"}}),Object(T.jsx)(M,{setToken:n,setTaskState:s}),i?Object(T.jsx)(C,{setLogin:function(){return u(!1)},setToken:n,setTaskState:s}):Object(T.jsx)(S,{setLogin:function(){return u(!0)},setToken:n,setTaskState:s})]})}))(D||(D=Object(i.a)(["\n    margin: 5% auto auto auto;\n    padding: 20px;\n    width: 250px;\n    display: flex;\n    flex-direction: column;\n    align-items:center;\n    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);\n"]))),F=n(42);var L,P=function(t){var e=t.timeToComplete,n=(t.dueDate,t.title),a=(t.desc,t.priority,t.onClick);return t.taskId,Object(T.jsx)("div",{onClick:a,children:Object(T.jsx)("table",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:n}),Object(T.jsxs)("td",{children:[e," min"]})]})})})};var _,A=Object(O.c)((function(t){var e=t.date,n=t.tasks,a=(t.completedState,t.setTasksState),s=(t.setCompletedState,t.token);return Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{children:e}),n.map((function(t){return Object(T.jsx)(P,{timeToComplete:t.time,dueDate:e,title:t.title,desc:t.desc,priority:t.priority,onClick:function(){fetch("https://duit-api.herokuapp.com/update/deltask?token=".concat(s),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({taskId:t.taskId})}).then((function(t){return t.json()})).then((function(t){return a(j(t))}))},taskId:t.taskId},t.taskId)}))]})}))(L||(L=Object(i.a)(["\n    \n"]))),J=n(40),E=n.n(J);n(61);function R(t){return t.getFullYear()+"/"+(t.getMonth()>8?""+(t.getMonth()+1):"0"+(t.getMonth()+1))+"/"+(t.getDate()>9?""+t.getDate():"0"+t.getDate())}var z=Object(O.c)((function(t){var e=t.className,n=t.minTime,s=t.setTasksState,c=t.token,r=Object(a.useState)(new Date),i=Object(o.a)(r,2),u=i[0],d=i[1],l=Object(a.useState)(new Date),p=Object(o.a)(l,2),b=p[0],h=p[1],f=Object(a.useState)(""),O=Object(o.a)(f,2),m=O[0],k=O[1],v=Object(a.useState)(0),y=Object(o.a)(v,2),S=y[0],w=y[1],C=Object(a.useState)(""),D=Object(o.a)(C,2),M=D[0],I=D[1],N=Object(a.useState)(0),F=Object(o.a)(N,2),L=F[0],P=F[1];return Object(T.jsxs)("div",{className:e,children:[Object(T.jsx)("p",{children:"Add new task"}),Object(T.jsx)(x,{onChange:function(t){return k(t.target.value)}}),Object(T.jsx)(x,{onChange:function(t){return I(t.target.value)}}),Object(T.jsx)(x,{type:"number",onChange:function(t){return w(parseInt(t.target.value))}}),Object(T.jsx)(x,{type:"number",onChange:function(t){return P(parseInt(t.target.value))}}),Object(T.jsx)(E.a,{selected:u,onChange:function(t){return d(t)}}),Object(T.jsx)(E.a,{selected:b,onChange:function(t){return h(t)}}),Object(T.jsx)(g,{type:"button",onClick:function(){var t=Date.now(),e=R(u),a=R(b);fetch("https://duit-api.herokuapp.com/update/addtask?token=".concat(c),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({time:Math.ceil(S/n)*n,remainingTime:Math.ceil(S/n)*n,title:m,desc:M,priority:L,startDate:e,dueDate:a,taskId:t})}).then((function(t){return t.json()})).then((function(t){return s(j(t))}))},children:"Add Task"})]})}))(_||(_=Object(i.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n"])));function U(t){return new Date(t.substring(5,7)+"/"+t.substring(8,10)+"/"+t.substring(0,4))}function B(t,e){var n=U(t),a=U(e);return Math.ceil(Math.abs(a-n)/864e5)}function G(t,e){if(t.size>0){var n,a,s,c=new Map,r=[],i=new Map,j=new Map,l=Object(d.a)(t);try{for(l.s();!(s=l.n()).done;){var p,b=Object(o.a)(s.value,2),h=(b[0],b[1]),f=Object(d.a)(h);try{for(f.s();!(p=f.n()).done;){var O=p.value,m=B(O.startDate,O.dueDate)+1;j.set(O.taskId,m),(void 0==n||n>O.startDate)&&(n=O.startDate),(void 0==a||a<O.dueDate)&&(a=O.dueDate);for(var g=0;g<m;g++){var k=U(O.startDate);k.setDate(k.getDate()+g),k=R(k),i.has(k)?i.set(k,i.get(k)+Math.round(O.time/e)):i.set(k,Math.round(O.time/e))}for(var x=0;x<Math.round(O.time/e);x++){var v=Object(F.a)({},O);v.time=e,delete v.onClick,r.push(v)}}}catch(A){f.e(A)}finally{f.f()}}}catch(A){l.e(A)}finally{l.f()}for(var T=B(n,a)+1,y=0;y<T;y++){var S=U(n);S.setDate(S.getDate()+y),S=R(S),c.set(S,[])}r.sort((function(t,e){return j.get(t.taskId)>j.get(e.taskId)?1:-1})),i=new Map(Object(u.a)(i.entries()).sort((function(t,e){return t[1]>e[1]?1:-1})));for(var w=0;r.length>0;){var C=U(n);if(C.setDate(C.getDate()+w),C=R(C),i.has(C)&&i.get(C)>0){for(var D=0;D<r.length;D++)if(r[D].startDate<=C&&C<=r[D].dueDate){c.get(C).push(r[D]),r.splice(D,1);break}i.set(C,i.get(C)-1)}w=(w+1)%T}var M,I=new Map,N=Object(d.a)(c);try{for(N.s();!(M=N.n()).done;){var L=Object(o.a)(M.value,2),P=L[0],_=L[1];_.length>0&&I.set(P,_)}}catch(A){N.e(A)}finally{N.f()}return function(t){var e,n=new Map,a=Object(d.a)(t);try{for(a.s();!(e=a.n()).done;){var s=Object(o.a)(e.value,2),c=s[0],r=s[1];if(r.length>0){var i,u=new Map,j=Object(d.a)(r);try{for(j.s();!(i=j.n()).done;){var l=i.value;u.has(l.taskId)?u.set(l.taskId,[l,u.get(l.taskId)[1]+l.time]):u.set(l.taskId,[l,l.time])}}catch(A){j.e(A)}finally{j.f()}var p,b=[],h=Object(d.a)(u);try{for(h.s();!(p=h.n()).done;){var f=Object(o.a)(p.value,2),O=(f[0],f[1]),m=Object(F.a)({},O[0]);m.time=O[1],b.push(m)}}catch(A){h.e(A)}finally{h.f()}n.set(c,b)}}}catch(A){a.e(A)}finally{a.f()}return n}(I)}return new Map}var Y,q=function(t){var e=t.tasks,n=t.roundTime,s=Object(a.useState)(new Map),c=Object(o.a)(s,2),r=c[0],i=c[1],u=[];return r.forEach((function(t,e){return u.push(Object(T.jsx)(A,{date:e,tasks:t},"s"+e))})),Object(T.jsxs)("div",{children:[Object(T.jsx)(g,{onClick:function(){return i(G(e,n))},children:"Generate new schedule"}),u]})};var H,K=Object(O.c)((function(t){var e=t.tasks,n=t.completedTasks,a=t.setTasks,s=t.setCompletedTasks,c=t.token,r=t.minTime,i=t.className,o=[];return e.forEach((function(t,e){return o.push(Object(T.jsx)(A,{date:e,tasks:t,completedState:n,setTasksState:a,setCompletedState:s,token:c},e))})),Object(T.jsxs)("div",{className:i,children:[Object(T.jsx)(z,{minTime:r,setTasksState:a,token:c}),o]})}))(Y||(Y=Object(i.a)(["\n    width: 33%;\n    display: flex;\n    flex-direction: column;\n"])));var Q,V=Object(O.c)((function(t){var e=t.tasks,n=t.setTasks,a=t.minTime,s=t.completedTasks,c=t.setCompletedTasks,r=(t.reminders,t.setReminders,t.token),i=(t.setToken,t.className);return Object(T.jsxs)("div",{className:i,children:[Object(T.jsx)(K,{tasks:e,completedTasks:s,setTasks:n,setCompletedTasks:c,token:r,minTime:a}),Object(T.jsx)(q,{tasks:e,roundTime:a})]})}))(H||(H=Object(i.a)(["\n    display: flex;\n    flex-direction: row;\n    margin: 5px;\n"])));var W=Object(O.c)((function(){var t=Object(a.useState)(new Map),e=Object(o.a)(t,2),n=e[0],s=e[1],c=Object(a.useState)(30),r=Object(o.a)(c,2),i=r[0],u=(r[1],Object(a.useState)(new Map)),d=Object(o.a)(u,2),j=d[0],l=d[1],p=Object(a.useState)([]),b=Object(o.a)(p,2),h=b[0],f=b[1],g=Object(a.useState)(""),k=Object(o.a)(g,2),x=k[0],y=k[1];return Object(a.useEffect)((function(){return document.title="Duit"})),Object(T.jsx)("div",{className:"App",children:Object(T.jsxs)(O.a,{theme:m,children:[Object(T.jsx)(v,{}),""===x?Object(T.jsx)(N,{setTokenState:y,setTasksState:s}):Object(T.jsx)(V,{tasks:n,setTasks:s,minTime:i,completedTasks:j,setCompletedTasks:l,reminders:h,setReminders:f,token:x,setToken:y})]})})}))(Q||(Q=Object(i.a)(["\n"]))),X=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,116)).then((function(e){var n=e.getCLS,a=e.getFID,s=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),a(t),s(t),c(t),r(t)}))};r.a.render(Object(T.jsx)(s.a.StrictMode,{children:Object(T.jsx)(W,{})}),document.getElementById("root")),X()},54:function(t,e,n){},55:function(t,e,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.9102ed31.chunk.js.map