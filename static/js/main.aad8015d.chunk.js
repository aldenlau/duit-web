(this.webpackJsonpduit=this.webpackJsonpduit||[]).push([[0],{109:function(t,e,n){"use strict";n.r(e);var a=n(2),c=n.n(a),s=n(18),r=n.n(s),i=(n(54),n(5)),o=(n(55),n(7)),u=n(39),d=n.n(u),j=(n(56),n(12));function p(t){var e,n=new Map,a=Object(j.a)(t);try{for(a.s();!(e=a.n()).done;){var c=e.value,s={time:c.time,remainingTime:c.remaining_time,title:c.title,desc:c.description,priority:c.priority,startDate:c.start_date,dueDate:c.due_date,taskId:c.task_id};n.has(c.due_date)?n.get(c.due_date).push(s):n.set(c.due_date,[s])}}catch(r){a.e(r)}finally{a.f()}return n}var l,h,b,f,O=n(6),g={main:"#00a2ff",fontFamily:"Arvo"},k=O.c.button(l||(l=Object(o.a)(["\n    background-color: ",";\n    color: #fff;\n    border: 1px solid transparent;\n    margin-right: 5px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n    height: 35px;\n    font-weight: bold;\n    font-size: 12px;\n    padding: 6px 12px 7px 12px;\n    border-radius: 5px;\n    text-align: center;\n    cursor: pointer;\n    font-family: ",";\n"])),(function(t){return t.theme.main}),(function(t){return t.theme.fontFamily})),m=O.c.input(h||(h=Object(o.a)(["\n    border: hidden;\n    background-color: #f2f2f2;\n    border-radius: 5px;\n    height: 25px;\n"]))),x=Object(O.b)(b||(b=Object(o.a)(["\n    body {\n        font-family: ",";\n    }\n"])),(function(t){return t.theme.fontFamily})),v=n(4);function y(t){return t.getFullYear()+"/"+(t.getMonth()>8?""+(t.getMonth()+1):"0"+(t.getMonth()+1))+"/"+(t.getDate()>9?""+t.getDate():"0"+t.getDate())}var T=Object(O.c)((function(t){var e=t.className,n=t.roundTime,c=t.setTasksState,s=t.token,r=Object(a.useState)(new Date),o=Object(i.a)(r,2),u=o[0],j=o[1],l=Object(a.useState)(new Date),h=Object(i.a)(l,2),b=h[0],f=h[1],O=Object(a.useState)(""),g=Object(i.a)(O,2),m=g[0],x=g[1],T=Object(a.useState)(0),S=Object(i.a)(T,2),w=S[0],C=S[1],D=Object(a.useState)(""),M=Object(i.a)(D,2),I=M[0],N=M[1],L=Object(a.useState)(0),A=Object(i.a)(L,2),F=A[0],P=A[1];return Object(v.jsxs)("div",{className:e,children:[Object(v.jsx)("p",{children:"Add new task"}),Object(v.jsx)("input",{onChange:function(t){return x(t.target.value)}}),Object(v.jsx)("input",{onChange:function(t){return N(t.target.value)}}),Object(v.jsx)("input",{type:"number",onChange:function(t){return C(parseInt(t.target.value))}}),Object(v.jsx)("input",{type:"number",onChange:function(t){return P(parseInt(t.target.value))}}),Object(v.jsx)(d.a,{selected:u,onChange:function(t){return j(t)}}),Object(v.jsx)(d.a,{selected:b,onChange:function(t){return f(t)}}),Object(v.jsx)(k,{type:"button",onClick:function(){var t=Date.now(),e=y(u),a=y(b);fetch("https://duit-api.herokuapp.com/update/addtask?token=".concat(s),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({time:Math.ceil(w/n)*n,remainingTime:Math.ceil(w/n)*n,title:m,desc:I,priority:F,startDate:e,dueDate:a,taskId:t})}).then((function(t){return t.json()})).then((function(t){return c(p(t))}))},children:"Add Task"})]})}))(f||(f=Object(o.a)(["\n\n"]))),S=n(47),w=n(41);var C=function(t){var e=t.timeToComplete,n=(t.dueDate,t.title),a=(t.desc,t.priority,t.onClick);return t.taskId,Object(v.jsx)("div",{onClick:a,children:Object(v.jsx)("table",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:n}),Object(v.jsxs)("td",{children:[e," min"]})]})})})};var D=function(t){var e=t.date,n=t.tasks,a=(t.completedState,t.setTasksState),c=(t.setCompletedState,t.token);return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{children:e}),n.map((function(t){return Object(v.jsx)(C,{timeToComplete:t.time,dueDate:e,title:t.title,desc:t.desc,priority:t.priority,onClick:function(){fetch("https://duit-api.herokuapp.com/update/deltask?token=".concat(c),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({taskId:t.taskId})}).then((function(t){return t.json()})).then((function(t){return a(p(t))}))},taskId:t.taskId},t.taskId)}))]})};function M(t){return new Date(t.substring(5,7)+"/"+t.substring(8,10)+"/"+t.substring(0,4))}function I(t,e){var n=M(t),a=M(e);return Math.ceil(Math.abs(a-n)/864e5)}function N(t,e){if(t.size>0){var n,a,c,s=new Map,r=[],o=new Map,u=new Map,d=Object(j.a)(t);try{for(d.s();!(c=d.n()).done;){var p,l=Object(i.a)(c.value,2),h=(l[0],l[1]),b=Object(j.a)(h);try{for(b.s();!(p=b.n()).done;){var f=p.value,O=I(f.startDate,f.dueDate)+1;u.set(f.taskId,O),(void 0==n||n>f.startDate)&&(n=f.startDate),(void 0==a||a<f.dueDate)&&(a=f.dueDate);for(var g=0;g<O;g++){var k=M(f.startDate);k.setDate(k.getDate()+g),k=y(k),o.has(k)?o.set(k,o.get(k)+Math.round(f.time/e)):o.set(k,Math.round(f.time/e))}for(var m=0;m<Math.round(f.time/e);m++){var x=Object(w.a)({},f);x.time=e,delete x.onClick,r.push(x)}}}catch(R){b.e(R)}finally{b.f()}}}catch(R){d.e(R)}finally{d.f()}for(var v=I(n,a)+1,T=0;T<v;T++){var C=M(n);C.setDate(C.getDate()+T),C=y(C),s.set(C,[])}r.sort((function(t,e){return u.get(t.taskId)>u.get(e.taskId)?1:-1})),o=new Map(Object(S.a)(o.entries()).sort((function(t,e){return t[1]>e[1]?1:-1})));for(var D=0;r.length>0;){var N=M(n);if(N.setDate(N.getDate()+D),N=y(N),o.has(N)&&o.get(N)>0){for(var L=0;L<r.length;L++)if(r[L].startDate<=N&&N<=r[L].dueDate){s.get(N).push(r[L]),r.splice(L,1);break}o.set(N,o.get(N)-1)}D=(D+1)%v}var A,F=new Map,P=Object(j.a)(s);try{for(P.s();!(A=P.n()).done;){var _=Object(i.a)(A.value,2),J=_[0],E=_[1];E.length>0&&F.set(J,E)}}catch(R){P.e(R)}finally{P.f()}return function(t){var e,n=new Map,a=Object(j.a)(t);try{for(a.s();!(e=a.n()).done;){var c=Object(i.a)(e.value,2),s=c[0],r=c[1];if(r.length>0){var o,u=new Map,d=Object(j.a)(r);try{for(d.s();!(o=d.n()).done;){var p=o.value;u.has(p.taskId)?u.set(p.taskId,[p,u.get(p.taskId)[1]+p.time]):u.set(p.taskId,[p,p.time])}}catch(R){d.e(R)}finally{d.f()}var l,h=[],b=Object(j.a)(u);try{for(b.s();!(l=b.n()).done;){var f=Object(i.a)(l.value,2),O=(f[0],f[1]),g=Object(w.a)({},O[0]);g.time=O[1],h.push(g)}}catch(R){b.e(R)}finally{b.f()}n.set(s,h)}}}catch(R){a.e(R)}finally{a.f()}return n}(F)}return new Map}var L,A=function(t){var e=t.tasks,n=t.roundTime,c=Object(a.useState)(new Map),s=Object(i.a)(c,2),r=s[0],o=s[1],u=[];return r.forEach((function(t,e){return u.push(Object(v.jsx)(D,{date:e,tasks:t},"s"+e))})),Object(v.jsxs)("div",{children:[Object(v.jsx)(k,{onClick:function(){return o(N(e,n))},children:"Generate new schedule"}),u]})};var F,P=Object(O.c)((function(t){var e=t.className,n=t.setLogin,c=t.setToken,s=t.setTaskState,r=Object(a.useState)(""),o=Object(i.a)(r,2),u=o[0],d=o[1],j=Object(a.useState)(""),l=Object(i.a)(j,2),h=l[0],b=l[1];return Object(v.jsxs)("div",{className:e,children:[Object(v.jsx)(k,{type:"button",onClick:function(){return n()},children:"Log in with an existing account"}),Object(v.jsx)("p",{children:"Register"}),Object(v.jsx)("p",{children:"Username"}),Object(v.jsx)("input",{onChange:function(t){return d(t.target.value)}}),Object(v.jsx)("p",{children:"Password"}),Object(v.jsx)("input",{onChange:function(t){return b(t.target.value)}}),Object(v.jsx)(k,{type:"button",onClick:function(){fetch("https://duit-api.herokuapp.com/auth/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:u,password:h})}).then((function(t){return t.json()})).then((function(t){return c(t.token),t.token})).then((function(t){return fetch("https://duit-api.herokuapp.com/update/tasks?token=".concat(t))})).then((function(t){return t.json()})).then((function(t){return s(p(t))}))},children:"Register"})]})}))(L||(L=Object(o.a)(["\n    display: flex;\n    flex-direction: row;\n    padding 6px 12px 7px 12px;\n    align-items: baseline;\n"])));var _,J=Object(O.c)((function(t){var e=t.className,n=t.setLogin,c=t.setToken,s=t.setTaskState,r=Object(a.useState)(""),o=Object(i.a)(r,2),u=o[0],d=o[1],j=Object(a.useState)(""),l=Object(i.a)(j,2),h=l[0],b=l[1];return Object(v.jsxs)("div",{className:e,children:[Object(v.jsx)("a",{onClick:function(){return n()},children:"Create an account"}),Object(v.jsx)("p",{children:"Login"}),Object(v.jsx)("p",{children:"Username"}),Object(v.jsx)(m,{onChange:function(t){return d(t.target.value)}}),Object(v.jsx)("p",{children:"Password"}),Object(v.jsx)(m,{onChange:function(t){return b(t.target.value)}}),Object(v.jsx)(k,{type:"button",onClick:function(){fetch("https://duit-api.herokuapp.com/auth/login?username=".concat(u,"&password=").concat(h)).then((function(t){return 401!=t.status?t.json():(alert("Incorrect credentials"),{token:""})})).then((function(t){return c(t.token),t.token})).then((function(t){return fetch("https://duit-api.herokuapp.com/update/tasks?token=".concat(t))})).then((function(t){return t.json()})).then((function(t){return s(p(t))}))},children:"Log in"})]})}))(F||(F=Object(o.a)(["\n    display: flex;\n    flex-direction: row;\n    padding 6px 12px 7px 12px;\n    align-items: baseline;\n"])));var E,R=Object(O.c)((function(t){var e=t.setToken,n=t.setTaskState;function c(t){var a=t.getAuthResponse().id_token;fetch("https://duit-api.herokuapp.com/auth/login-google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a})}).then((function(t){return t.json()})).then((function(t){return e(t.token),t.token})).then((function(t){return fetch("https://duit-api.herokuapp.com/update/tasks?token=".concat(t))})).then((function(t){return t.json()})).then((function(t){return n(p(t))}))}return Object(a.useEffect)((function(){window.gapi.signin2.render("g-signin2",{scope:"https://www.googleapis.com/auth/plus.login",width:120,height:36,longtitle:!1,theme:"light",onsuccess:c})})),Object(v.jsx)("div",{children:Object(v.jsx)("div",{id:"g-signin2","data-onsuccess":c})})}))(_||(_=Object(o.a)(["\n"])));var U=Object(O.c)((function(t){var e=t.className,n=t.setTokenState,c=t.setTasksState,s=Object(a.useState)(!0),r=Object(i.a)(s,2),o=r[0],u=r[1];return Object(v.jsxs)("div",{className:e,children:[Object(v.jsx)(R,{setToken:n,setTaskState:c}),o?Object(v.jsx)(J,{setLogin:function(){return u(!1)},setToken:n,setTaskState:c}):Object(v.jsx)(P,{setLogin:function(){return u(!0)},setToken:n,setTaskState:c})]})}))(E||(E=Object(o.a)(["\n    display:flex;\n    flex-direction: row;\n    justify-content: flex-end;\n    align-items: baseline;\n"])));var z=function(t){var e=t.tasks,n=t.completedTasks,a=t.setTasks,c=t.setCompletedTasks,s=t.token,r=[];return e.forEach((function(t,e){return r.push(Object(v.jsx)(D,{date:e,tasks:t,completedState:n,setTasksState:a,setCompletedState:c,token:s},e))})),Object(v.jsx)("div",{children:r})};var B=function(){var t=Object(a.useState)(new Map),e=Object(i.a)(t,2),n=e[0],c=e[1],s=Object(a.useState)(30),r=Object(i.a)(s,2),o=r[0],u=(r[1],Object(a.useState)(new Map)),d=Object(i.a)(u,2),j=d[0],p=d[1],l=Object(a.useState)([]),h=Object(i.a)(l,2),b=(h[0],h[1],Object(a.useState)("")),f=Object(i.a)(b,2),k=f[0],m=f[1];return Object(a.useEffect)((function(){return document.title="Duit"})),Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)(O.a,{theme:g,children:[Object(v.jsx)(x,{}),Object(v.jsx)(U,{setTokenState:m,setTasksState:c}),Object(v.jsx)(T,{roundTime:o,setTasksState:c,token:k}),Object(v.jsx)(z,{tasks:n,completedTasks:j,setTasks:c,setCompletedTasks:p,token:k}),Object(v.jsx)(A,{tasks:n,roundTime:o})]})})},G=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,116)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,s=e.getLCP,r=e.getTTFB;n(t),a(t),c(t),s(t),r(t)}))};r.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(B,{})}),document.getElementById("root")),G()},54:function(t,e,n){},55:function(t,e,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.aad8015d.chunk.js.map