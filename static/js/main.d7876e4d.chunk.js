(this.webpackJsonpduit=this.webpackJsonpduit||[]).push([[0],{46:function(t,e,n){},47:function(t,e,n){},97:function(t,e,n){"use strict";n.r(e);var a=n(4),c=n.n(a),s=n(16),r=n.n(s),o=(n(46),n(5)),i=(n.p,n(47),n(3));var u=function(t){var e=t.timeToComplete,n=(t.dueDate,t.title),a=(t.desc,t.priority,t.onClick);return t.taskId,Object(i.jsx)("div",{onClick:a,children:Object(i.jsx)("table",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:n}),Object(i.jsxs)("td",{children:[e," min"]})]})})})},j=n(10);function d(t){var e,n=new Map,a=Object(j.a)(t);try{for(a.s();!(e=a.n()).done;){var c=e.value,s={time:c.time,remainingTime:c.remaining_time,title:c.title,desc:c.description,priority:c.priority,startDate:c.start_date,dueDate:c.due_date,taskId:c.task_id};n.has(c.due_date)?n.get(c.due_date).push(s):n.set(c.due_date,[s])}}catch(r){a.e(r)}finally{a.f()}return n}var h=function(t){var e=t.date,n=t.tasks,a=(t.completedState,t.setTasksState),c=(t.setCompletedState,t.token);return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{children:e}),n.map((function(t){return Object(i.jsx)(u,{timeToComplete:t.time,dueDate:e,title:t.title,desc:t.desc,priority:t.priority,onClick:function(){fetch("https://duit-api.herokuapp.com/update/deltask?token=".concat(c),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({taskId:t.taskId})}).then((function(t){return t.json()})).then((function(t){return a(d(t))}))},taskId:t.taskId},t.taskId)}))]})},b=n(35),p=n.n(b);n(49);function l(t){return t.getFullYear()+"/"+(t.getMonth()>8?""+(t.getMonth()+1):"0"+(t.getMonth()+1))+"/"+(t.getDate()>9?""+t.getDate():"0"+t.getDate())}var f=function(t){var e=t.roundTime,n=t.setTasksState,c=t.token,s=Object(a.useState)(new Date),r=Object(o.a)(s,2),u=r[0],j=r[1],h=Object(a.useState)(new Date),b=Object(o.a)(h,2),f=b[0],O=b[1],g=Object(a.useState)(""),k=Object(o.a)(g,2),v=k[0],m=k[1],x=Object(a.useState)(0),S=Object(o.a)(x,2),y=S[0],T=S[1],C=Object(a.useState)(""),w=Object(o.a)(C,2),D=w[0],M=w[1],I=Object(a.useState)(0),L=Object(o.a)(I,2),P=L[0],_=L[1];return Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{children:"Add new task"}),Object(i.jsx)("input",{onChange:function(t){return m(t.target.value)}}),Object(i.jsx)("input",{onChange:function(t){return M(t.target.value)}}),Object(i.jsx)("input",{type:"number",onChange:function(t){return T(parseInt(t.target.value))}}),Object(i.jsx)("input",{type:"number",onChange:function(t){return _(parseInt(t.target.value))}}),Object(i.jsx)(p.a,{selected:u,onChange:function(t){return j(t)}}),Object(i.jsx)(p.a,{selected:f,onChange:function(t){return O(t)}}),Object(i.jsx)("button",{type:"button",onClick:function(){var t=Date.now(),a=l(u),s=l(f);fetch("https://duit-api.herokuapp.com/update/addtask?token=".concat(c),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({time:Math.ceil(y/e)*e,remainingTime:Math.ceil(y/e)*e,title:v,desc:D,priority:P,startDate:a,dueDate:s,taskId:t})}).then((function(t){return t.json()})).then((function(t){return n(d(t))}))},children:"Add Task"})]})},O=n(39),g=n(36);function k(t){return new Date(t.substring(5,7)+"/"+t.substring(8,10)+"/"+t.substring(0,4))}function v(t,e){var n=k(t),a=k(e);return Math.ceil(Math.abs(a-n)/864e5)}function m(t,e){if(t.size>0){var n,a,c,s=new Map,r=[],i=new Map,u=new Map,d=Object(j.a)(t);try{for(d.s();!(c=d.n()).done;){var h,b=Object(o.a)(c.value,2),p=(b[0],b[1]),f=Object(j.a)(p);try{for(f.s();!(h=f.n()).done;){var m=h.value,x=v(m.startDate,m.dueDate)+1;u.set(m.taskId,x),(void 0==n||n>m.startDate)&&(n=m.startDate),(void 0==a||a<m.dueDate)&&(a=m.dueDate);for(var S=0;S<x;S++){var y=k(m.startDate);y.setDate(y.getDate()+S),y=l(y),i.has(y)?i.set(y,i.get(y)+Math.round(m.time/e)):i.set(y,Math.round(m.time/e))}for(var T=0;T<Math.round(m.time/e);T++){var C=Object(g.a)({},m);C.time=e,delete C.onClick,r.push(C)}}}catch(R){f.e(R)}finally{f.f()}}}catch(R){d.e(R)}finally{d.f()}for(var w=v(n,a)+1,D=0;D<w;D++){var M=k(n);M.setDate(M.getDate()+D),M=l(M),s.set(M,[])}r.sort((function(t,e){return u.get(t.taskId)>u.get(e.taskId)?1:-1})),i=new Map(Object(O.a)(i.entries()).sort((function(t,e){return t[1]>e[1]?1:-1})));for(var I=0;r.length>0;){var L=k(n);if(L.setDate(L.getDate()+I),L=l(L),i.has(L)&&i.get(L)>0){for(var P=0;P<r.length;P++)if(r[P].startDate<=L&&L<=r[P].dueDate){s.get(L).push(r[P]),r.splice(P,1);break}i.set(L,i.get(L)-1)}I=(I+1)%w}var _,A=new Map,J=Object(j.a)(s);try{for(J.s();!(_=J.n()).done;){var E=Object(o.a)(_.value,2),F=E[0],N=E[1];N.length>0&&A.set(F,N)}}catch(R){J.e(R)}finally{J.f()}return function(t){var e,n=new Map,a=Object(j.a)(t);try{for(a.s();!(e=a.n()).done;){var c=Object(o.a)(e.value,2),s=c[0],r=c[1];if(r.length>0){var i,u=new Map,d=Object(j.a)(r);try{for(d.s();!(i=d.n()).done;){var h=i.value;u.has(h.taskId)?u.set(h.taskId,[h,u.get(h.taskId)[1]+h.time]):u.set(h.taskId,[h,h.time])}}catch(R){d.e(R)}finally{d.f()}var b,p=[],l=Object(j.a)(u);try{for(l.s();!(b=l.n()).done;){var f=Object(o.a)(b.value,2),O=(f[0],f[1]),k=Object(g.a)({},O[0]);k.time=O[1],p.push(k)}}catch(R){l.e(R)}finally{l.f()}n.set(s,p)}}}catch(R){a.e(R)}finally{a.f()}return n}(A)}return new Map}var x=function(t){var e=t.tasks,n=t.roundTime,c=Object(a.useState)(new Map),s=Object(o.a)(c,2),r=s[0],u=s[1],j=[];return r.forEach((function(t,e){return j.push(Object(i.jsx)(h,{date:e,tasks:t},"s"+e))})),Object(i.jsxs)("div",{children:[Object(i.jsx)("button",{onClick:function(){return u(m(e,n))},children:"Generate new schedule"}),j]})};var S=function(t){var e=t.setLogin,n=t.setToken,c=t.setTaskState,s=Object(a.useState)(""),r=Object(o.a)(s,2),u=r[0],j=r[1],h=Object(a.useState)(""),b=Object(o.a)(h,2),p=b[0],l=b[1],f=Object(a.useState)(""),O=Object(o.a)(f,2),g=O[0],k=O[1];return Object(i.jsxs)("div",{children:[Object(i.jsx)("button",{type:"button",onClick:function(){return e()},children:"Log in with an existing account"}),Object(i.jsx)("p",{children:"Register"}),Object(i.jsx)("p",{children:"Username"}),Object(i.jsx)("input",{onChange:function(t){return j(t.target.value)}}),Object(i.jsx)("p",{children:"Password"}),Object(i.jsx)("input",{onChange:function(t){return l(t.target.value)}}),Object(i.jsx)("button",{type:"button",onClick:function(){fetch("https://duit-api.herokuapp.com/auth/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:u,password:p})}).then((function(t){n(t.token),k(t.token)})).then((function(t){return fetch("https://duit-api.herokuapp.com/update/tasks?token=".concat(g))})).then((function(t){return t.json()})).then((function(t){return c(d(t))}))},children:"Register"})]})};var y=function(t){var e=t.setLogin,n=t.setToken,c=t.setTaskState,s=Object(a.useState)(""),r=Object(o.a)(s,2),u=r[0],j=r[1],h=Object(a.useState)(""),b=Object(o.a)(h,2),p=b[0],l=b[1],f=Object(a.useState)(""),O=Object(o.a)(f,2),g=O[0],k=O[1];return Object(i.jsxs)("div",{children:[Object(i.jsx)("button",{type:"button",onClick:function(){return e()},children:"Create an account"}),Object(i.jsx)("p",{children:"Login"}),Object(i.jsx)("p",{children:"Username"}),Object(i.jsx)("input",{onChange:function(t){return j(t.target.value)}}),Object(i.jsx)("p",{children:"Password"}),Object(i.jsx)("input",{onChange:function(t){return l(t.target.value)}}),Object(i.jsx)("button",{type:"button",onClick:function(){fetch("https://duit-api.herokuapp.com/auth/login?username=".concat(u,"&password=").concat(p)).then((function(t){return 401!=t.status?t.json():(alert("Incorrect credentials"),{token:""})})).then((function(t){n(t.token),k(t.token)})).then((function(t){return fetch("https://duit-api.herokuapp.com/update/tasks?token=".concat(g))})).then((function(t){return t.json()})).then((function(t){return c(d(t))}))},children:"Log in"})]})};var T=function(t){var e=t.setToken,n=t.setTaskState,c=Object(a.useState)(""),s=Object(o.a)(c,2),r=s[0],u=s[1];function j(){console.log("rendering google signin button"),gapi.signin2.render("my-signin2",{scope:"https://www.googleapis.com/auth/plus.login",width:200,height:50,longtitle:!0,theme:"light",onsuccess:this.onSignIn})}return Object(a.useEffect)((function(){window.addEventListener("google-loaded",j)})),Object(i.jsx)("div",{children:Object(i.jsx)("div",{id:"g-signin2","data-onsuccess":function(t){var a=t.getAuthResponse().id_token;fetch("https://duit-api.herokuapp.com/auth/login-google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a})}).then((function(t){console.log("data.token"),e(t.token),u(t.token)})).then((function(t){return fetch("https://duit-api.herokuapp.com/update/tasks?token=".concat(r))})).then((function(t){return t.json()})).then((function(t){return n(d(t))}))}})})};var C=function(t){var e=t.setTokenState,n=t.setTasksState,c=Object(a.useState)(!0),s=Object(o.a)(c,2),r=s[0],u=s[1];return Object(i.jsxs)("div",{children:[Object(i.jsx)(T,{setToken:e,setTaskState:n}),r?Object(i.jsx)(y,{setLogin:function(){return u(!1)},setToken:e,setTaskState:n}):Object(i.jsx)(S,{setLogin:function(){return u(!0)},setToken:e,setTaskState:n})]})};var w=function(){var t=Object(a.useState)(new Map),e=Object(o.a)(t,2),n=e[0],c=e[1],s=Object(a.useState)(30),r=Object(o.a)(s,2),u=r[0],j=(r[1],Object(a.useState)(new Map)),d=Object(o.a)(j,2),b=d[0],p=d[1],l=Object(a.useState)([]),O=Object(o.a)(l,2),g=(O[0],O[1],Object(a.useState)("")),k=Object(o.a)(g,2),v=k[0],m=k[1],S=[];return n.forEach((function(t,e){return S.push(Object(i.jsx)(h,{date:e,tasks:t,completedState:b,setTasksState:c,setCompletedState:p,token:v},e))})),Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(C,{setTokenState:m,setTasksState:c}),Object(i.jsx)(f,{roundTime:u,setTasksState:c,token:v}),S,Object(i.jsx)(x,{tasks:n,roundTime:u})]})},D=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,104)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,s=e.getLCP,r=e.getTTFB;n(t),a(t),c(t),s(t),r(t)}))};r.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(w,{})}),document.getElementById("root")),D()}},[[97,1,2]]]);
//# sourceMappingURL=main.d7876e4d.chunk.js.map