(this.webpackJsonpduit=this.webpackJsonpduit||[]).push([[0],{109:function(t,e,n){"use strict";n.r(e);var a=n(2),s=n.n(a),r=n(18),c=n.n(r),i=(n(54),n(7)),o=n(5),u=(n(55),n(12));function d(t){var e,n=new Map,a=Object(u.a)(t);try{for(a.s();!(e=a.n()).done;){var s=e.value,r={time:s.time,remainingTime:s.remaining_time,title:s.title,desc:s.description,priority:s.priority,startDate:s.start_date,dueDate:s.due_date,taskId:s.task_id};n.has(s.due_date)?n.get(s.due_date).push(r):n.set(s.due_date,[r])}}catch(c){a.e(c)}finally{a.f()}return n}var j,p,l,h,b,f=n(6),O={main:"#00a2ff",second:"#69c8ff",fontFamily:"Merriweather"},k=f.c.button(j||(j=Object(i.a)(["\n    background-color: ",";\n    color: #fff;\n    border: 1px solid transparent;\n    margin-right: 5px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n    height: 35px;\n    font-weight: bold;\n    font-size: 12px;\n    padding: 6px 12px 7px 12px;\n    border-radius: 5px;\n    text-align: center;\n    cursor: pointer;\n    font-family: ",";\n"])),(function(t){return t.theme.main}),(function(t){return t.theme.fontFamily})),g=f.c.button(p||(p=Object(i.a)(["\n    background-color: ",";\n    color: #fff;\n    border: 1px solid transparent;\n    margin-right: 5px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n    height: 35px;\n    font-weight: bold;\n    font-size: 12px;\n    padding: 6px 12px 7px 12px;\n    border-radius: 5px;\n    text-align: center;\n    cursor: pointer;\n    font-family: ",";\n"])),(function(t){return t.theme.second}),(function(t){return t.theme.fontFamily})),m=f.c.input(l||(l=Object(i.a)(["\n    border: hidden;\n    background-color: #f2f2f2;\n    border-radius: 5px;\n    height: 25px;\n"]))),x=Object(f.b)(h||(h=Object(i.a)(["\n    body {\n        font-family: ",";\n    }\n"])),(function(t){return t.theme.fontFamily})),v=n(4);var T,y=Object(f.c)((function(t){var e=t.className,n=t.setLogin,s=t.setToken,r=t.setTaskState,c=Object(a.useState)(""),i=Object(o.a)(c,2),u=i[0],j=i[1],p=Object(a.useState)(""),l=Object(o.a)(p,2),h=l[0],b=l[1];return Object(v.jsxs)("div",{className:e,children:[Object(v.jsx)(k,{type:"button",onClick:function(){return n()},children:"Log in with an existing account"}),Object(v.jsx)("p",{children:"Register"}),Object(v.jsx)("p",{children:"Username"}),Object(v.jsx)("input",{onChange:function(t){return j(t.target.value)}}),Object(v.jsx)("p",{children:"Password"}),Object(v.jsx)("input",{onChange:function(t){return b(t.target.value)}}),Object(v.jsx)(k,{type:"button",onClick:function(){fetch("https://duit-api.herokuapp.com/auth/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:u,password:h})}).then((function(t){return t.json()})).then((function(t){return s(t.token),t.token})).then((function(t){return fetch("https://duit-api.herokuapp.com/update/tasks?token=".concat(t))})).then((function(t){return t.json()})).then((function(t){return r(d(t))}))},children:"Register"})]})}))(b||(b=Object(i.a)(["\n    display: flex;\n    flex-direction: column;\n    padding: 6px 12px 7px 12px;\n    align-items: baseline;\n"])));var S,C=Object(f.c)((function(t){var e=t.className,n=t.setLogin,s=t.setToken,r=t.setTaskState,c=Object(a.useState)(""),i=Object(o.a)(c,2),u=i[0],j=i[1],p=Object(a.useState)(""),l=Object(o.a)(p,2),h=l[0],b=l[1];return Object(v.jsxs)("div",{className:e,children:[Object(v.jsx)(g,{onClick:function(){return n()},children:"Create an account"}),Object(v.jsx)("p",{children:"Login"}),Object(v.jsx)("p",{children:"Username"}),Object(v.jsx)(m,{onChange:function(t){return j(t.target.value)}}),Object(v.jsx)("p",{children:"Password"}),Object(v.jsx)(m,{onChange:function(t){return b(t.target.value)}}),Object(v.jsx)(k,{type:"button",onClick:function(){fetch("https://duit-api.herokuapp.com/auth/login?username=".concat(u,"&password=").concat(h)).then((function(t){return 401!=t.status?t.json():(alert("Incorrect credentials"),{token:""})})).then((function(t){return s(t.token),t.token})).then((function(t){return fetch("https://duit-api.herokuapp.com/update/tasks?token=".concat(t))})).then((function(t){return t.json()})).then((function(t){return r(d(t))}))},children:"Log in"})]})}))(T||(T=Object(i.a)(["\n    display: flex;\n    flex-direction: column;\n    padding: 6px 12px 7px 12px;\n    align-items: baseline;\n"])));var w,D=Object(f.c)((function(t){var e=t.setToken,n=t.setTaskState;function s(t){var a=t.getAuthResponse().id_token;fetch("https://duit-api.herokuapp.com/auth/login-google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a})}).then((function(t){return t.json()})).then((function(t){return e(t.token),t.token})).then((function(t){return fetch("https://duit-api.herokuapp.com/update/tasks?token=".concat(t))})).then((function(t){return t.json()})).then((function(t){return n(d(t))}))}return Object(a.useEffect)((function(){window.gapi.signin2.render("g-signin2",{scope:"https://www.googleapis.com/auth/plus.login",width:120,height:36,longtitle:!1,theme:"light",onsuccess:s})})),Object(v.jsx)("div",{children:Object(v.jsx)("div",{id:"g-signin2","data-onsuccess":s})})}))(S||(S=Object(i.a)(["\n"])));var M,I=Object(f.c)((function(t){var e=t.className,n=t.setTokenState,s=t.setTasksState,r=Object(a.useState)(!0),c=Object(o.a)(r,2),i=c[0],u=c[1];return Object(v.jsxs)("div",{className:e,children:[i?Object(v.jsx)(C,{setLogin:function(){return u(!1)},setToken:n,setTaskState:s}):Object(v.jsx)(y,{setLogin:function(){return u(!0)},setToken:n,setTaskState:s}),Object(v.jsx)(D,{setToken:n,setTaskState:s})]})}))(w||(w=Object(i.a)(["\n    margin: auto;\n    display: flex;\n    flex-direction: column;\n    justify-content:center;\n"]))),N=n(39),F=n.n(N);n(61);function L(t){return t.getFullYear()+"/"+(t.getMonth()>8?""+(t.getMonth()+1):"0"+(t.getMonth()+1))+"/"+(t.getDate()>9?""+t.getDate():"0"+t.getDate())}var P=Object(f.c)((function(t){var e=t.className,n=t.roundTime,s=t.setTasksState,r=t.token,c=Object(a.useState)(new Date),i=Object(o.a)(c,2),u=i[0],j=i[1],p=Object(a.useState)(new Date),l=Object(o.a)(p,2),h=l[0],b=l[1],f=Object(a.useState)(""),O=Object(o.a)(f,2),g=O[0],m=O[1],x=Object(a.useState)(0),T=Object(o.a)(x,2),y=T[0],S=T[1],C=Object(a.useState)(""),w=Object(o.a)(C,2),D=w[0],M=w[1],I=Object(a.useState)(0),N=Object(o.a)(I,2),P=N[0],_=N[1];return Object(v.jsxs)("div",{className:e,children:[Object(v.jsx)("p",{children:"Add new task"}),Object(v.jsx)("input",{onChange:function(t){return m(t.target.value)}}),Object(v.jsx)("input",{onChange:function(t){return M(t.target.value)}}),Object(v.jsx)("input",{type:"number",onChange:function(t){return S(parseInt(t.target.value))}}),Object(v.jsx)("input",{type:"number",onChange:function(t){return _(parseInt(t.target.value))}}),Object(v.jsx)(F.a,{selected:u,onChange:function(t){return j(t)}}),Object(v.jsx)(F.a,{selected:h,onChange:function(t){return b(t)}}),Object(v.jsx)(k,{type:"button",onClick:function(){var t=Date.now(),e=L(u),a=L(h);fetch("https://duit-api.herokuapp.com/update/addtask?token=".concat(r),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({time:Math.ceil(y/n)*n,remainingTime:Math.ceil(y/n)*n,title:g,desc:D,priority:P,startDate:e,dueDate:a,taskId:t})}).then((function(t){return t.json()})).then((function(t){return s(d(t))}))},children:"Add Task"})]})}))(M||(M=Object(i.a)(["\n\n"]))),_=n(47),A=n(41);var J=function(t){var e=t.timeToComplete,n=(t.dueDate,t.title),a=(t.desc,t.priority,t.onClick);return t.taskId,Object(v.jsx)("div",{onClick:a,children:Object(v.jsx)("table",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:n}),Object(v.jsxs)("td",{children:[e," min"]})]})})})};var E=function(t){var e=t.date,n=t.tasks,a=(t.completedState,t.setTasksState),s=(t.setCompletedState,t.token);return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{children:e}),n.map((function(t){return Object(v.jsx)(J,{timeToComplete:t.time,dueDate:e,title:t.title,desc:t.desc,priority:t.priority,onClick:function(){fetch("https://duit-api.herokuapp.com/update/deltask?token=".concat(s),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({taskId:t.taskId})}).then((function(t){return t.json()})).then((function(t){return a(d(t))}))},taskId:t.taskId},t.taskId)}))]})};function R(t){return new Date(t.substring(5,7)+"/"+t.substring(8,10)+"/"+t.substring(0,4))}function z(t,e){var n=R(t),a=R(e);return Math.ceil(Math.abs(a-n)/864e5)}function U(t,e){if(t.size>0){var n,a,s,r=new Map,c=[],i=new Map,d=new Map,j=Object(u.a)(t);try{for(j.s();!(s=j.n()).done;){var p,l=Object(o.a)(s.value,2),h=(l[0],l[1]),b=Object(u.a)(h);try{for(b.s();!(p=b.n()).done;){var f=p.value,O=z(f.startDate,f.dueDate)+1;d.set(f.taskId,O),(void 0==n||n>f.startDate)&&(n=f.startDate),(void 0==a||a<f.dueDate)&&(a=f.dueDate);for(var k=0;k<O;k++){var g=R(f.startDate);g.setDate(g.getDate()+k),g=L(g),i.has(g)?i.set(g,i.get(g)+Math.round(f.time/e)):i.set(g,Math.round(f.time/e))}for(var m=0;m<Math.round(f.time/e);m++){var x=Object(A.a)({},f);x.time=e,delete x.onClick,c.push(x)}}}catch(J){b.e(J)}finally{b.f()}}}catch(J){j.e(J)}finally{j.f()}for(var v=z(n,a)+1,T=0;T<v;T++){var y=R(n);y.setDate(y.getDate()+T),y=L(y),r.set(y,[])}c.sort((function(t,e){return d.get(t.taskId)>d.get(e.taskId)?1:-1})),i=new Map(Object(_.a)(i.entries()).sort((function(t,e){return t[1]>e[1]?1:-1})));for(var S=0;c.length>0;){var C=R(n);if(C.setDate(C.getDate()+S),C=L(C),i.has(C)&&i.get(C)>0){for(var w=0;w<c.length;w++)if(c[w].startDate<=C&&C<=c[w].dueDate){r.get(C).push(c[w]),c.splice(w,1);break}i.set(C,i.get(C)-1)}S=(S+1)%v}var D,M=new Map,I=Object(u.a)(r);try{for(I.s();!(D=I.n()).done;){var N=Object(o.a)(D.value,2),F=N[0],P=N[1];P.length>0&&M.set(F,P)}}catch(J){I.e(J)}finally{I.f()}return function(t){var e,n=new Map,a=Object(u.a)(t);try{for(a.s();!(e=a.n()).done;){var s=Object(o.a)(e.value,2),r=s[0],c=s[1];if(c.length>0){var i,d=new Map,j=Object(u.a)(c);try{for(j.s();!(i=j.n()).done;){var p=i.value;d.has(p.taskId)?d.set(p.taskId,[p,d.get(p.taskId)[1]+p.time]):d.set(p.taskId,[p,p.time])}}catch(J){j.e(J)}finally{j.f()}var l,h=[],b=Object(u.a)(d);try{for(b.s();!(l=b.n()).done;){var f=Object(o.a)(l.value,2),O=(f[0],f[1]),k=Object(A.a)({},O[0]);k.time=O[1],h.push(k)}}catch(J){b.e(J)}finally{b.f()}n.set(r,h)}}}catch(J){a.e(J)}finally{a.f()}return n}(M)}return new Map}var B=function(t){var e=t.tasks,n=t.roundTime,s=Object(a.useState)(new Map),r=Object(o.a)(s,2),c=r[0],i=r[1],u=[];return c.forEach((function(t,e){return u.push(Object(v.jsx)(E,{date:e,tasks:t},"s"+e))})),Object(v.jsxs)("div",{children:[Object(v.jsx)(k,{onClick:function(){return i(U(e,n))},children:"Generate new schedule"}),u]})};var G=function(t){var e=t.tasks,n=t.completedTasks,a=t.setTasks,s=t.setCompletedTasks,r=t.token,c=[];return e.forEach((function(t,e){return c.push(Object(v.jsx)(E,{date:e,tasks:t,completedState:n,setTasksState:a,setCompletedState:s,token:r},e))})),Object(v.jsx)("div",{children:c})};var Y,q=function(t){var e=t.tasks,n=t.setTasks,a=t.minTime,s=t.completedTasks,r=t.setCompletedTasks,c=(t.reminders,t.setReminders,t.token);return t.setToken,Object(v.jsxs)("div",{children:[Object(v.jsx)(P,{roundTime:a,setTasksState:n,token:c}),Object(v.jsx)(G,{tasks:e,completedTasks:s,setTasks:n,setCompletedTasks:r,token:c}),Object(v.jsx)(B,{tasks:e,roundTime:a})]})};var H=Object(f.c)((function(){var t=Object(a.useState)(new Map),e=Object(o.a)(t,2),n=e[0],s=e[1],r=Object(a.useState)(30),c=Object(o.a)(r,2),i=c[0],u=(c[1],Object(a.useState)(new Map)),d=Object(o.a)(u,2),j=d[0],p=d[1],l=Object(a.useState)([]),h=Object(o.a)(l,2),b=h[0],k=h[1],g=Object(a.useState)(""),m=Object(o.a)(g,2),T=m[0],y=m[1];return Object(a.useEffect)((function(){return document.title="Duit"})),Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)(f.a,{theme:O,children:[Object(v.jsx)(x,{}),""===T?Object(v.jsx)(I,{setTokenState:y,setTasksState:s}):Object(v.jsx)(q,{tasks:n,setTasks:s,minTime:i,completedTasks:j,setCompletedTasks:p,reminders:b,setReminders:k,token:T,setToken:y})]})})}))(Y||(Y=Object(i.a)(["\n"]))),K=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,116)).then((function(e){var n=e.getCLS,a=e.getFID,s=e.getFCP,r=e.getLCP,c=e.getTTFB;n(t),a(t),s(t),r(t),c(t)}))};c.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(H,{})}),document.getElementById("root")),K()},54:function(t,e,n){},55:function(t,e,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.0f8816e4.chunk.js.map