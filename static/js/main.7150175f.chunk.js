(this.webpackJsonpduit=this.webpackJsonpduit||[]).push([[0],{109:function(t,e,n){"use strict";n.r(e);var a,c,s,r,i,o=n(2),u=n.n(o),d=n(18),j=n.n(d),l=(n(54),n(6)),p=n(7),b=(n(55),n(5)),h={main:"#00a2ff",second:"#69c8ff",fontFamily:"Roboto"},f=b.c.button(a||(a=Object(l.a)(["\n    background-color: ",";\n    color: #fff;\n    border: 1px solid transparent;\n    margin-right: 5px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n    height: 35px;\n    font-weight: bold;\n    font-size: 12px;\n    padding: 6px 12px 7px 12px;\n    border-radius: 5px;\n    text-align: center;\n    cursor: pointer;\n    font-family: ",";\n"])),(function(t){return t.theme.main}),(function(t){return t.theme.fontFamily})),O=b.c.button(c||(c=Object(l.a)(["\n    background-color: ",";\n    color: #fff;\n    border: 1px solid transparent;\n    margin-right: 5px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n    height: 28px;\n    font-weight: bold;\n    font-size: 12px;\n    padding: 6px 12px 7px 12px;\n    border-radius: 5px;\n    text-align: center;\n    cursor: pointer;\n    font-family: ",";\n"])),(function(t){return t.theme.second}),(function(t){return t.theme.fontFamily})),m=b.c.input(s||(s=Object(l.a)(["\n    border: hidden;\n    background-color: #f2f2f2;\n    border-radius: 5px;\n    height: 25px;\n"]))),g=Object(b.b)(r||(r=Object(l.a)(["\n    body {\n        font-family: ",";\n    }\n"])),(function(t){return t.theme.fontFamily})),x=n(3);var k,v=Object(b.c)((function(t){var e=t.className,n=t.setLogin,a=t.setToken,c=(t.setTaskState,Object(o.useState)("")),s=Object(p.a)(c,2),r=s[0],i=s[1],u=Object(o.useState)(""),d=Object(p.a)(u,2),j=d[0],l=d[1];return Object(x.jsxs)("div",{className:e,children:[Object(x.jsx)(O,{type:"button",onClick:function(){return n()},children:"Log in with an existing account"}),Object(x.jsx)("p",{children:"Register"}),Object(x.jsx)("p",{children:"Username"}),Object(x.jsx)(m,{onChange:function(t){return i(t.target.value)}}),Object(x.jsx)("p",{children:"Password"}),Object(x.jsx)(m,{onChange:function(t){return l(t.target.value)}}),Object(x.jsx)(f,{type:"button",onClick:function(){fetch("https://duit-api.herokuapp.com/auth/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:r,password:j})}).then((function(t){return t.json()})).then((function(t){a(t.token)}))},children:"Register"})]})}))(i||(i=Object(l.a)(["\n    display: flex;\n    flex-direction: column;\n    padding: 6px 12px 7px 12px;\n    align-items:center;\n"])));var T,y=Object(b.c)((function(t){var e=t.className,n=t.setLogin,a=t.setToken,c=(t.setTaskState,Object(o.useState)("")),s=Object(p.a)(c,2),r=s[0],i=s[1],u=Object(o.useState)(""),d=Object(p.a)(u,2),j=d[0],l=d[1];return Object(x.jsxs)("div",{className:e,children:[Object(x.jsx)(O,{onClick:function(){return n()},children:"Create an account"}),Object(x.jsx)("p",{children:"Login"}),Object(x.jsx)("p",{children:"Username"}),Object(x.jsx)(m,{onChange:function(t){return i(t.target.value)}}),Object(x.jsx)("p",{children:"Password"}),Object(x.jsx)(m,{onChange:function(t){return l(t.target.value)}}),Object(x.jsx)(f,{type:"button",onClick:function(){fetch("https://duit-api.herokuapp.com/auth/login?username=".concat(r,"&password=").concat(j)).then((function(t){return 401!==t.status?t.json():(alert("Incorrect credentials"),{token:""})})).then((function(t){a(t.token)}))},children:"Log in"})]})}))(k||(k=Object(l.a)(["\n    display: flex;\n    flex-direction: column;\n    padding: 6px 12px 7px 12px;\n    align-items:center;\n"]))),S=n(27),w=n(12);function C(t){var e,n=new Map,a=Object(w.a)(t);try{for(a.s();!(e=a.n()).done;){var c=e.value,s={time:c.time,remainingTime:c.remaining_time,title:c.title,desc:c.description,priority:c.priority,startDate:c.start_date,dueDate:c.due_date,taskId:c.task_id};n.has(c.due_date)?n.get(c.due_date).push(s):n.set(c.due_date,[s])}}catch(r){a.e(r)}finally{a.f()}return n=new Map(Object(S.a)(n.entries()).sort())}var D,M=Object(b.c)((function(t){var e=t.setToken,n=t.setTaskState;function a(t){var a=t.getAuthResponse().id_token;fetch("https://duit-api.herokuapp.com/auth/login-google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a})}).then((function(t){return t.json()})).then((function(t){return e(t.token),t.token})).then((function(t){return fetch("https://duit-api.herokuapp.com/update/tasks?token=".concat(t))})).then((function(t){return t.json()})).then((function(t){return n(C(t))}))}return Object(o.useEffect)((function(){window.gapi.signin2.render("g-signin2",{scope:"https://www.googleapis.com/auth/plus.login",width:120,height:36,longtitle:!1,theme:"light",onsuccess:a})})),Object(x.jsx)("div",{children:Object(x.jsx)("div",{id:"g-signin2","data-onsuccess":a})})}))(T||(T=Object(l.a)(["\n"]))),N=n.p+"static/media/logo.994c7676.png";var I,F=Object(b.c)((function(t){var e=t.className,n=t.setTokenState,a=t.setTasksState,c=Object(o.useState)(!0),s=Object(p.a)(c,2),r=s[0],i=s[1];return Object(x.jsxs)("div",{className:e,children:[Object(x.jsx)("img",{src:N,width:"20%",height:"20%",style:{margin:"10px"}}),Object(x.jsx)(M,{setToken:n,setTaskState:a}),r?Object(x.jsx)(y,{setLogin:function(){return i(!1)},setToken:n,setTaskState:a}):Object(x.jsx)(v,{setLogin:function(){return i(!0)},setToken:n,setTaskState:a})]})}))(D||(D=Object(l.a)(["\n    margin: 5% auto auto auto;\n    padding: 20px;\n    width: 250px;\n    display: flex;\n    flex-direction: column;\n    align-items:center;\n    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);\n"]))),L=n(42);var P,_=Object(b.c)((function(t){var e=t.className,n=t.onClick;return Object(x.jsx)("div",{className:e,onClick:n})}))(I||(I=Object(l.a)(["\n    height: 12px;\n    width: 12px;\n    border: 1px solid gray;\n    border-radius: 2px;\n    cursor: pointer;\n    margin: 8px;\n"])));var A,E=Object(b.c)((function(t){var e=t.className,n=t.timeToComplete,a=(t.dueDate,t.title),c=(t.desc,t.priority,t.onClick);return t.taskId,Object(x.jsxs)("div",{className:e,children:[Object(x.jsx)(_,{onClick:c}),Object(x.jsx)("h3",{children:a}),Object(x.jsxs)("h3",{children:[n," min"]})]})}))(P||(P=Object(l.a)(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n"])));var J,R=Object(b.c)((function(t){var e=t.date,n=t.tasks,a=(t.completedState,t.setTasksState),c=(t.setCompletedState,t.token);return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:e}),n.map((function(t){return Object(x.jsx)(E,{timeToComplete:t.time,dueDate:e,title:t.title,desc:t.desc,priority:t.priority,onClick:function(){fetch("https://duit-api.herokuapp.com/update/deltask?token=".concat(c),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({taskId:t.taskId})}).then((function(t){return t.json()})).then((function(t){return a(C(t))}))},taskId:t.taskId},t.taskId)}))]})}))(A||(A=Object(l.a)(["\n    \n"]))),z=n(40),U=n.n(z);n(61);function B(t){return t.getFullYear()+"/"+(t.getMonth()>8?""+(t.getMonth()+1):"0"+(t.getMonth()+1))+"/"+(t.getDate()>9?""+t.getDate():"0"+t.getDate())}var G=Object(b.c)((function(t){var e=t.className,n=t.minTime,a=t.setTasksState,c=t.token,s=Object(o.useState)(new Date),r=Object(p.a)(s,2),i=r[0],u=r[1],d=Object(o.useState)(new Date),j=Object(p.a)(d,2),l=j[0],b=j[1],h=Object(o.useState)(""),O=Object(p.a)(h,2),g=O[0],k=O[1],v=Object(o.useState)(0),T=Object(p.a)(v,2),y=T[0],S=T[1],w=Object(o.useState)(""),D=Object(p.a)(w,2),M=D[0],N=D[1],I=Object(o.useState)(0),F=Object(p.a)(I,2),L=F[0],P=F[1];return Object(x.jsxs)("div",{className:e,children:[Object(x.jsx)("p",{children:"Add new task"}),Object(x.jsx)(m,{onChange:function(t){return k(t.target.value)}}),Object(x.jsx)(m,{onChange:function(t){return N(t.target.value)}}),Object(x.jsx)(m,{type:"number",onChange:function(t){return S(parseInt(t.target.value))}}),Object(x.jsx)(m,{type:"number",onChange:function(t){return P(parseInt(t.target.value))}}),Object(x.jsx)("div",{children:Object(x.jsx)(U.a,{selected:i,onChange:function(t){return u(t)}})}),Object(x.jsx)("div",{children:Object(x.jsx)(U.a,{selected:l,onChange:function(t){return b(t)}})}),Object(x.jsx)(f,{type:"button",onClick:function(){var t=Date.now(),e=B(i),s=B(l);fetch("https://duit-api.herokuapp.com/update/addtask?token=".concat(c),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({time:Math.ceil(y/n)*n,remainingTime:Math.ceil(y/n)*n,title:g,desc:M,priority:L,startDate:e,dueDate:s,taskId:t})}).then((function(t){return t.json()})).then((function(t){return a(C(t))}))},children:"Add Task"})]})}))(J||(J=Object(l.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n"])));function Y(t){return new Date(t.substring(5,7)+"/"+t.substring(8,10)+"/"+t.substring(0,4))}function q(t,e){var n=Y(t),a=Y(e);return Math.ceil(Math.abs(a-n)/864e5)}function H(t,e){if(t.size>0){var n,a,c,s=new Map,r=[],i=new Map,o=new Map,u=Object(w.a)(t);try{for(u.s();!(c=u.n()).done;){var d,j=Object(p.a)(c.value,2),l=(j[0],j[1]),b=Object(w.a)(l);try{for(b.s();!(d=b.n()).done;){var h=d.value,f=q(h.startDate,h.dueDate)+1;o.set(h.taskId,f),(void 0===n||n>h.startDate)&&(n=h.startDate),(void 0===a||a<h.dueDate)&&(a=h.dueDate);for(var O=0;O<f;O++){var m=Y(h.startDate);m.setDate(m.getDate()+O),m=B(m),i.has(m)?i.set(m,i.get(m)+Math.round(h.time/e)):i.set(m,Math.round(h.time/e))}for(var g=0;g<Math.round(h.time/e);g++){var x=Object(L.a)({},h);x.time=e,delete x.onClick,r.push(x)}}}catch(A){b.e(A)}finally{b.f()}}}catch(A){u.e(A)}finally{u.f()}for(var k=q(n,a)+1,v=0;v<k;v++){var T=Y(n);T.setDate(T.getDate()+v),T=B(T),s.set(T,[])}r.sort((function(t,e){return o.get(t.taskId)>o.get(e.taskId)?1:-1})),i=new Map(Object(S.a)(i.entries()).sort((function(t,e){return t[1]>e[1]?1:-1})));for(var y=0;r.length>0;){var C=Y(n);if(C.setDate(C.getDate()+y),C=B(C),i.has(C)&&i.get(C)>0){for(var D=0;D<r.length;D++)if(r[D].startDate<=C&&C<=r[D].dueDate){s.get(C).push(r[D]),r.splice(D,1);break}i.set(C,i.get(C)-1)}y=(y+1)%k}var M,N=new Map,I=Object(w.a)(s);try{for(I.s();!(M=I.n()).done;){var F=Object(p.a)(M.value,2),P=F[0],_=F[1];_.length>0&&N.set(P,_)}}catch(A){I.e(A)}finally{I.f()}return function(t){var e,n=new Map,a=Object(w.a)(t);try{for(a.s();!(e=a.n()).done;){var c=Object(p.a)(e.value,2),s=c[0],r=c[1];if(r.length>0){var i,o=new Map,u=Object(w.a)(r);try{for(u.s();!(i=u.n()).done;){var d=i.value;o.has(d.taskId)?o.set(d.taskId,[d,o.get(d.taskId)[1]+d.time]):o.set(d.taskId,[d,d.time])}}catch(A){u.e(A)}finally{u.f()}var j,l=[],b=Object(w.a)(o);try{for(b.s();!(j=b.n()).done;){var h=Object(p.a)(j.value,2),f=(h[0],h[1]),O=Object(L.a)({},f[0]);O.time=f[1],l.push(O)}}catch(A){b.e(A)}finally{b.f()}n.set(s,l)}}}catch(A){a.e(A)}finally{a.f()}return n}(N)}return new Map}var K,Q=function(t){var e=t.tasks,n=t.roundTime,a=Object(o.useState)(new Map),c=Object(p.a)(a,2),s=c[0],r=c[1],i=[];return s.forEach((function(t,e){return i.push(Object(x.jsx)(R,{date:e,tasks:t},"s"+e))})),Object(x.jsxs)("div",{children:[Object(x.jsx)(f,{onClick:function(){return r(H(e,n))},children:"Generate new schedule"}),i]})};var V,W=Object(b.c)((function(t){var e=t.tasks,n=t.completedTasks,a=t.setTasks,c=t.setCompletedTasks,s=t.token,r=t.minTime,i=t.className,o=[];return e.forEach((function(t,e){return o.push(Object(x.jsx)(R,{date:e,tasks:t,completedState:n,setTasksState:a,setCompletedState:c,token:s},e))})),Object(x.jsxs)("div",{className:i,children:[Object(x.jsx)(G,{minTime:r,setTasksState:a,token:s}),o]})}))(K||(K=Object(l.a)(["\n    width: 33%;\n    display: flex;\n    flex-direction: column;\n"])));var X,Z=Object(b.c)((function(t){var e=t.tasks,n=t.setTasks,a=t.minTime,c=t.completedTasks,s=t.setCompletedTasks,r=(t.reminders,t.setReminders,t.token),i=(t.setToken,t.className);return Object(o.useEffect)((function(){fetch("https://duit-api.herokuapp.com/update/tasks?token=".concat(r)).then((function(t){return t.json()})).then((function(t){return n(C(t))}))}),[r,n]),Object(x.jsxs)("div",{className:i,children:[Object(x.jsx)(W,{tasks:e,completedTasks:c,setTasks:n,setCompletedTasks:s,token:r,minTime:a}),Object(x.jsx)(Q,{tasks:e,roundTime:a})]})}))(V||(V=Object(l.a)(["\n    display: flex;\n    flex-direction: row;\n    margin: 5px;\n"])));var $=Object(b.c)((function(){var t=Object(o.useState)(new Map),e=Object(p.a)(t,2),n=e[0],a=e[1],c=Object(o.useState)(30),s=Object(p.a)(c,2),r=s[0],i=(s[1],Object(o.useState)(new Map)),u=Object(p.a)(i,2),d=u[0],j=u[1],l=Object(o.useState)([]),f=Object(p.a)(l,2),O=f[0],m=f[1],k=Object(o.useState)(""),v=Object(p.a)(k,2),T=v[0],y=v[1];return Object(o.useEffect)((function(){return document.title="Duit"})),Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(b.a,{theme:h,children:[Object(x.jsx)(g,{}),""===T?Object(x.jsx)(F,{setTokenState:y,setTasksState:a}):Object(x.jsx)(Z,{tasks:n,setTasks:a,minTime:r,completedTasks:d,setCompletedTasks:j,reminders:O,setReminders:m,token:T,setToken:y})]})})}))(X||(X=Object(l.a)(["\n"]))),tt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,116)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,s=e.getLCP,r=e.getTTFB;n(t),a(t),c(t),s(t),r(t)}))};j.a.render(Object(x.jsx)(u.a.StrictMode,{children:Object(x.jsx)($,{})}),document.getElementById("root")),tt()},54:function(t,e,n){},55:function(t,e,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.7150175f.chunk.js.map