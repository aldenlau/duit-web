(this.webpackJsonpduit=this.webpackJsonpduit||[]).push([[0],{46:function(t,e,n){},47:function(t,e,n){},97:function(t,e,n){"use strict";n.r(e);var a=n(4),r=n.n(a),c=n(16),s=n.n(c),i=(n(46),n(5)),o=(n.p,n(47),n(3));var u=function(t){var e=t.timeToComplete,n=(t.dueDate,t.title),a=(t.desc,t.priority,t.onClick);return t.taskId,Object(o.jsx)("div",{onClick:a,children:Object(o.jsx)("table",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:n}),Object(o.jsxs)("td",{children:[e," min"]})]})})})},j=n(10);function d(t){var e,n=new Map,a=Object(j.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value,c={time:r.time,remainingTime:r.remaining_time,title:r.title,desc:r.description,priority:r.priority,startDate:r.start_date,dueDate:r.due_date,taskId:r.task_id};n.has(r.due_date)?n.get(r.due_date).push(c):n.set(r.due_date,[c])}}catch(s){a.e(s)}finally{a.f()}return n}var h=function(t){var e=t.date,n=t.tasks,a=(t.completedState,t.setTasksState),r=(t.setCompletedState,t.token);return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{children:e}),n.map((function(t){return Object(o.jsx)(u,{timeToComplete:t.time,dueDate:e,title:t.title,desc:t.desc,priority:t.priority,onClick:function(){fetch("https://duit-api.herokuapp.com/update/deltask?token=".concat(r),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({taskId:t.taskId})}).then((function(t){return t.json()})).then((function(t){return a(d(t))}))},taskId:t.taskId},t.taskId)}))]})},p=n(35),b=n.n(p);n(49);function l(t){return t.getFullYear()+"/"+(t.getMonth()>8?""+(t.getMonth()+1):"0"+(t.getMonth()+1))+"/"+(t.getDate()>9?""+t.getDate():"0"+t.getDate())}var f=function(t){var e=t.roundTime,n=t.setTasksState,r=t.token,c=Object(a.useState)(new Date),s=Object(i.a)(c,2),u=s[0],j=s[1],h=Object(a.useState)(new Date),p=Object(i.a)(h,2),f=p[0],O=p[1],k=Object(a.useState)(""),g=Object(i.a)(k,2),v=g[0],m=g[1],x=Object(a.useState)(0),S=Object(i.a)(x,2),y=S[0],T=S[1],C=Object(a.useState)(""),w=Object(i.a)(C,2),D=w[0],M=w[1],I=Object(a.useState)(0),L=Object(i.a)(I,2),P=L[0],_=L[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{children:"Add new task"}),Object(o.jsx)("input",{onChange:function(t){return m(t.target.value)}}),Object(o.jsx)("input",{onChange:function(t){return M(t.target.value)}}),Object(o.jsx)("input",{type:"number",onChange:function(t){return T(parseInt(t.target.value))}}),Object(o.jsx)("input",{type:"number",onChange:function(t){return _(parseInt(t.target.value))}}),Object(o.jsx)(b.a,{selected:u,onChange:function(t){return j(t)}}),Object(o.jsx)(b.a,{selected:f,onChange:function(t){return O(t)}}),Object(o.jsx)("button",{type:"button",onClick:function(){var t=Date.now(),a=l(u),c=l(f);fetch("https://duit-api.herokuapp.com/update/addtask?token=".concat(r),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({time:Math.ceil(y/e)*e,remainingTime:Math.ceil(y/e)*e,title:v,desc:D,priority:P,startDate:a,dueDate:c,taskId:t})}).then((function(t){return t.json()})).then((function(t){return n(d(t))}))},children:"Add Task"})]})},O=n(39),k=n(36);function g(t){return new Date(t.substring(5,7)+"/"+t.substring(8,10)+"/"+t.substring(0,4))}function v(t,e){var n=g(t),a=g(e);return Math.ceil(Math.abs(a-n)/864e5)}function m(t,e){if(t.size>0){var n,a,r,c=new Map,s=[],o=new Map,u=new Map,d=Object(j.a)(t);try{for(d.s();!(r=d.n()).done;){var h,p=Object(i.a)(r.value,2),b=(p[0],p[1]),f=Object(j.a)(b);try{for(f.s();!(h=f.n()).done;){var m=h.value,x=v(m.startDate,m.dueDate)+1;u.set(m.taskId,x),(void 0==n||n>m.startDate)&&(n=m.startDate),(void 0==a||a<m.dueDate)&&(a=m.dueDate);for(var S=0;S<x;S++){var y=g(m.startDate);y.setDate(y.getDate()+S),y=l(y),o.has(y)?o.set(y,o.get(y)+Math.round(m.time/e)):o.set(y,Math.round(m.time/e))}for(var T=0;T<Math.round(m.time/e);T++){var C=Object(k.a)({},m);C.time=e,delete C.onClick,s.push(C)}}}catch(R){f.e(R)}finally{f.f()}}}catch(R){d.e(R)}finally{d.f()}for(var w=v(n,a)+1,D=0;D<w;D++){var M=g(n);M.setDate(M.getDate()+D),M=l(M),c.set(M,[])}s.sort((function(t,e){return u.get(t.taskId)>u.get(e.taskId)?1:-1})),o=new Map(Object(O.a)(o.entries()).sort((function(t,e){return t[1]>e[1]?1:-1})));for(var I=0;s.length>0;){var L=g(n);if(L.setDate(L.getDate()+I),L=l(L),o.has(L)&&o.get(L)>0){for(var P=0;P<s.length;P++)if(s[P].startDate<=L&&L<=s[P].dueDate){c.get(L).push(s[P]),s.splice(P,1);break}o.set(L,o.get(L)-1)}I=(I+1)%w}var _,A=new Map,J=Object(j.a)(c);try{for(J.s();!(_=J.n()).done;){var F=Object(i.a)(_.value,2),N=F[0],E=F[1];E.length>0&&A.set(N,E)}}catch(R){J.e(R)}finally{J.f()}return function(t){var e,n=new Map,a=Object(j.a)(t);try{for(a.s();!(e=a.n()).done;){var r=Object(i.a)(e.value,2),c=r[0],s=r[1];if(s.length>0){var o,u=new Map,d=Object(j.a)(s);try{for(d.s();!(o=d.n()).done;){var h=o.value;u.has(h.taskId)?u.set(h.taskId,[h,u.get(h.taskId)[1]+h.time]):u.set(h.taskId,[h,h.time])}}catch(R){d.e(R)}finally{d.f()}var p,b=[],l=Object(j.a)(u);try{for(l.s();!(p=l.n()).done;){var f=Object(i.a)(p.value,2),O=(f[0],f[1]),g=Object(k.a)({},O[0]);g.time=O[1],b.push(g)}}catch(R){l.e(R)}finally{l.f()}n.set(c,b)}}}catch(R){a.e(R)}finally{a.f()}return n}(A)}return new Map}var x=function(t){var e=t.tasks,n=t.roundTime,r=Object(a.useState)(new Map),c=Object(i.a)(r,2),s=c[0],u=c[1],j=[];return s.forEach((function(t,e){return j.push(Object(o.jsx)(h,{date:e,tasks:t},"s"+e))})),Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{onClick:function(){return u(m(e,n))},children:"Generate new schedule"}),j]})};var S=function(t){var e=t.setLogin,n=t.setToken,r=t.setTaskState,c=Object(a.useState)(""),s=Object(i.a)(c,2),u=s[0],j=s[1],h=Object(a.useState)(""),p=Object(i.a)(h,2),b=p[0],l=p[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{type:"button",onClick:function(){return e()},children:"Log in with an existing account"}),Object(o.jsx)("p",{children:"Register"}),Object(o.jsx)("p",{children:"Username"}),Object(o.jsx)("input",{onChange:function(t){return j(t.target.value)}}),Object(o.jsx)("p",{children:"Password"}),Object(o.jsx)("input",{onChange:function(t){return l(t.target.value)}}),Object(o.jsx)("button",{type:"button",onClick:function(){fetch("https://duit-api.herokuapp.com/auth/register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:u,password:b})}).then((function(t){return t.json()})).then((function(t){return n(t.token),t.token})).then((function(t){return fetch("https://duit-api.herokuapp.com/update/tasks?token=".concat(t))})).then((function(t){return t.json()})).then((function(t){return r(d(t))}))},children:"Register"})]})};var y=function(t){var e=t.setLogin,n=t.setToken,r=t.setTaskState,c=Object(a.useState)(""),s=Object(i.a)(c,2),u=s[0],j=s[1],h=Object(a.useState)(""),p=Object(i.a)(h,2),b=p[0],l=p[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{type:"button",onClick:function(){return e()},children:"Create an account"}),Object(o.jsx)("p",{children:"Login"}),Object(o.jsx)("p",{children:"Username"}),Object(o.jsx)("input",{onChange:function(t){return j(t.target.value)}}),Object(o.jsx)("p",{children:"Password"}),Object(o.jsx)("input",{onChange:function(t){return l(t.target.value)}}),Object(o.jsx)("button",{type:"button",onClick:function(){fetch("https://duit-api.herokuapp.com/auth/login?username=".concat(u,"&password=").concat(b)).then((function(t){return 401!=t.status?t.json():(alert("Incorrect credentials"),{token:""})})).then((function(t){return n(t.token),t.token})).then((function(t){return fetch("https://duit-api.herokuapp.com/update/tasks?token=".concat(t))})).then((function(t){return t.json()})).then((function(t){return r(d(t))}))},children:"Log in"})]})};var T=function(t){var e=t.setToken,n=t.setTaskState;function r(t){var a=t.getAuthResponse().id_token;fetch("https://duit-api.herokuapp.com/auth/login-google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a})}).then((function(t){return t.json()})).then((function(t){return e(t.token),t.token})).then((function(t){return fetch("https://duit-api.herokuapp.com/update/tasks?token=".concat(t))})).then((function(t){return t.json()})).then((function(t){return n(d(t))}))}return Object(a.useEffect)((function(){window.gapi.signin2.render("g-signin2",{scope:"https://www.googleapis.com/auth/plus.login",width:200,height:50,longtitle:!0,theme:"dark",onsuccess:r})})),Object(o.jsx)("div",{children:Object(o.jsx)("div",{id:"g-signin2","data-onsuccess":r})})};var C=function(t){var e=t.setTokenState,n=t.setTasksState,r=Object(a.useState)(!0),c=Object(i.a)(r,2),s=c[0],u=c[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)(T,{setToken:e,setTaskState:n}),s?Object(o.jsx)(y,{setLogin:function(){return u(!1)},setToken:e,setTaskState:n}):Object(o.jsx)(S,{setLogin:function(){return u(!0)},setToken:e,setTaskState:n})]})};var w=function(){var t=Object(a.useState)(new Map),e=Object(i.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)(30),s=Object(i.a)(c,2),u=s[0],j=(s[1],Object(a.useState)(new Map)),d=Object(i.a)(j,2),p=d[0],b=d[1],l=Object(a.useState)([]),O=Object(i.a)(l,2),k=(O[0],O[1],Object(a.useState)("")),g=Object(i.a)(k,2),v=g[0],m=g[1],S=[];return n.forEach((function(t,e){return S.push(Object(o.jsx)(h,{date:e,tasks:t,completedState:p,setTasksState:r,setCompletedState:b,token:v},e))})),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(C,{setTokenState:m,setTasksState:r}),Object(o.jsx)(f,{roundTime:u,setTasksState:r,token:v}),S,Object(o.jsx)(x,{tasks:n,roundTime:u})]})},D=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,104)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),a(t),r(t),c(t),s(t)}))};s.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(w,{})}),document.getElementById("root")),D()}},[[97,1,2]]]);
//# sourceMappingURL=main.1e03a8d5.chunk.js.map